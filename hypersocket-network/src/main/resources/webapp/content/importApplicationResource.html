<div class="modal" id="uploadLaunchers" tabindex="-1" role="dialog">
	<div class="modal-dialog"> 
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title" localize="importLauncher.title"></h4>
			</div>
			<div class="modal-body">

				<div id="uploadLaunchersProperties"></div>
					<div class="propertyItem form-group">
						<label for="file" class="col-md-3 control-label"
							localize="importLauncher.file.label"></label>
						<div class="propertyValue col-md-9">
							<input type="file" name="jsonFile" id="jsonFile" class="form-control" />
							<div>
								<span class="help-block" localize="importLauncher.file.info"></span>
							</div>
						</div>
				</div>
			</div>
			<div class="modal-footer">
				<button id="importLaunchersButton" type="button" class="btn btn-primary">
					<i id="uploadIcon" class="fa fa-upload"></i><span
						localize="importLaunchersButton.label"></span>
				</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function() {
		$('#uploadLaunchers').localize();

		$('#uploadLaunchers').data('action', function(callback) {
			$('#jsonFile').val('');
			$('#uploadLaunchers').data('callback', callback);
			$('#uploadLaunchers').modal('show');
			$('#uploadLaunchers').resourceDialog('error','reset');
		});

		$('#importLaunchersButton').click(function(e) {
	
			if (!$('#jsonFile')[0].files[0]) {
				$('#uploadLaunchers').resourceDialog('error', getResource("error.selectLaunchersFile"));
				return;
			}
			
			var formData = new FormData();
			formData.append('file', $('#jsonFile')[0].files[0]);
			$('#uploadIcon').removeClass('fa-upload');
			$('#uploadIcon').addClass('fa-spinner fa-spin');
			$.ajax({
				type : 'POST',
				url : basePath +'/api/launchers/import',  
				dataType : 'json',
				cache : false,
				contentType : false,
				processData : false,
				data : formData,
				success : function(data) {
			 				if (data.success) {
				   				$('#uploadLaunchers').modal('hide');
				   				$('#uploadLaunchers').data('callback')();
			  	 				showSuccess(data.message);
			 				} else {
			 	  				$('#uploadLaunchers').resourceDialog('error',data.message);
			 				} 
						},
				error : function(jqXHR,textStatus,errorThrown) {
		      				$('#uploadLaunchers').resourceDialog('error',errorThrown);
						},
				complete: function() {
							$('#uploadIcon').removeClass('fa-spinner fa-spin');
							$('#uploadIcon').addClass('fa-upload');
						} 
			});
		});
	});
</script>

